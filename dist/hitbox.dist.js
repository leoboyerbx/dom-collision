!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Hitbox=t():e.Hitbox=t()}(window,(function(){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){e.exports=n(1).default},function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}n.r(t);var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"noArgumentProvided",value:function(){throw new Error("Error in Hitbox: function arguments not provided.")}},{key:"targetNotProvided",value:function(){throw new Error("Error in Hitbox: you must provide a target element.")}},{key:"wrongTargetType",value:function(e){throw new Error("Error in DOM Collisions: wrong argument type provided for elements or targetElements. Expected string, NodeList, or Node. Got "+e)}}],(n=null)&&i(t.prototype,n),o&&i(t,o),e}();function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;r(this,e),this.stack={},this.thisContext=t}var t,n,i;return t=e,(n=[{key:"register",value:function(e,t){this.stack[e]||(this.stack[e]=[]),this.stack[e].push(t)}},{key:"call",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.stack[e]&&this.stack[e].length>0&&this.stack[e].map((function(e){e.apply(t.thisContext,n)}))}}])&&l(t.prototype,n),i&&l(t,i),e}();function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var u=function(){function e(t){var n=t.el1,i=t.el2,o=t.width,r=t.height,l=t.top,a=t.left,s=t.minRectArea;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.element=n,this.targetElement=i,this.elements=[n,i]||!1,this.elements.sort(),this.area=o*r||0,this.width=o||0,this.height=r||0,this.top=l||0,this.left=a||0,this.overlap=this.area/s||0}var t,n,i;return t=e,(n=[{key:"alreadyIn",value:function(e){for(var t=0;t<e.length;t++)if(this.elements[0]===e[t].elements[0]&&this.elements[1]===e[t].elements[1])return{result:!0,index:t};return!1}}])&&s(t.prototype,n),i&&s(t,i),e}();function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var f=function(){function e(t){var n=t.elements,i=t.targetElements,r=t.watch,l=void 0===r||r,s=t.minOverlap,u=void 0===s?0:s,c=t.onScreenOnly,h=void 0!==c&&c,f=t.debug,p=void 0!==f&&f;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.events=new a,this.previousCollisions=[],n||o.targetNotProvided(),this.targets=this.setUpTargets(n),i&&(this.targetElements=this.setUpTargets(i)),this.watching=l,this.minOverlap=u,this.onScreenOnly=h,this.debug=p,this.loop()}var t,n,i;return t=e,(n=[{key:"setUpTargets",value:function(e){return e instanceof NodeList?e:"string"==typeof e?document.querySelectorAll(e):e instanceof Node?[e]:void o.wrongTargetType(c(e))}},{key:"loop",value:function(){this.debug&&this.cleanDebugRects(),this.computeEachIntersection(),this.watching&&window.requestAnimationFrame(this.loop.bind(this))}},{key:"computeEachIntersection",value:function(){this.compareEach(this.computeIntersection.bind(this))}},{key:"watch",value:function(){this.watching=!0,window.requestAnimationFrame(this.loop.bind(this))}},{key:"unwatch",value:function(){this.watching=!1}},{key:"on",value:function(e,t){this.events.register(e,t)}},{key:"onCollisionStart",value:function(e){return this.on("collisionStart",e)}},{key:"onCollisionEnd",value:function(e){return this.on("collisionEnd",e)}},{key:"onCollision",value:function(e){return this.on("collision",e)}},{key:"computeIntersection",value:function(e,t){var n=e.getBoundingClientRect(),i=t.getBoundingClientRect(),o=Math.max(n.left,i.left),r=Math.max(n.top,i.top),l=Math.min(n.left+n.width,i.left+i.width)-o,a=Math.min(n.top+n.height,i.top+i.height)-r;if(a>0&&l>0){var s=Math.min(n.width*n.height,i.width*i.height)||1,c=new u({el1:e,el2:t,width:l,height:a,top:r,left:o,minRectArea:s});if(c.overlap>=this.minOverlap)return c.alreadyIn(this.previousCollisions)||(this.previousCollisions.push(c),this.events.call("collisionStart",[c])),this.events.call("collision",[c]),this.debug&&this.drawDebugRectangle(c),c}else{var h=new u({el1:e,el2:t}).alreadyIn(this.previousCollisions);h&&(this.events.call("collisionEnd",[this.previousCollisions[h.index]]),this.previousCollisions.splice(h.index,1))}}},{key:"compareEach",value:function(e){var t=this;if(this.targetElements)this.targets.forEach((function(n){t.targetElements.forEach((function(t){e(n,t)}))}));else for(var n=this.targets,i=0;i<n.length;i++)for(var o=i+1;o<n.length;o++)n[i]!==n[o]&&e(n[i],n[o])}},{key:"drawDebugRectangle",value:function(e){var t=document.createElement("div");t.style.position="fixed",t.style.top=e.top+"px",t.style.left=e.left+"px",t.style.width=e.width+"px",t.style.height=e.height+"px",t.style.background="rgba(249,255,27,0.6)",t.style.border="solid rgb(249,255,27) 1px",t.style.zIndex="100000",t.classList.add("hitbox-debug-rect"),document.body.append(t)}},{key:"cleanDebugRects",value:function(){document.querySelectorAll(".hitbox-debug-rect").forEach((function(e){return e.remove()}))}},{key:"setDebug",value:function(e){this.debug=e,e||this.cleanDebugRects()}}])&&h(t.prototype,n),i&&h(t,i),e}();t.default=f}])}));